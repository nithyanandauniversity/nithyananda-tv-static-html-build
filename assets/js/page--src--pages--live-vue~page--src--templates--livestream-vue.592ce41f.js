(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/O9y":function(t,e,s){"use strict";s("SrFS")},"0xOb":function(t,e,s){"use strict";s("2A0u")},"0zj9":function(t,e,s){"use strict";s("sYBl")},"2A0u":function(t,e,s){},"4hLg":function(t,e,s){"use strict";var a=s("Mj6V"),n=s.n(a);e.a={beforeRouteLeave:function(t,e,s){t.hash||"undefined"==typeof document||(n.a.start(),s())}}},"5rCo":function(t,e,s){"use strict";var a,n=s("HaE+"),r=(s("M9EM"),s("6piV"),s("DQNa"),s("rMz7"),s("ma9I"),s("QWBl"),s("07d7"),s("FZtP"),s("sMBO"),s("R5XZ"),s("ls82"),s("2qj+")),o=s("za7x"),i=s("VV+c"),c=s("lO2I"),l={name:"ChatHeader",components:{Icon:o.a},data:function(){return{chatIcon:c.i}}},u=s("KHd+"),d=Object(u.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat__header px-5 py-3 flex-grow-0 flex gap-x-3 border-b-1 border-accent_darken border-opacity-15"},[e("Icon",{staticClass:"w-5",attrs:{color:"fill-accent",icon:this.chatIcon}}),e("div",{staticClass:"header__text text-lg font-medium"},[this._v("Live Chat")])],1)}),[],!1,null,null,null).exports,m=s("gfuk"),h={name:"ChatMessage",props:{message:{type:Object,required:!0},received:{type:Boolean,required:!0}},methods:{formatTime:function(t){return m(t).fromNow()}}},g=(s("/O9y"),Object(u.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chatMessage mb-4 max-w-3/4 flex gap-x-2 items-end",class:t.received?"ml-auto":"mr-auto"},[s("div",{staticClass:"chatMessage__avatar flex-grow-0 flex-shrink-0 rounded-full overflow-hidden w-9",class:t.received?"order-2":"order-1"},[s("img",{staticClass:"w-full h-full object-cover",attrs:{src:t.message.picture}})]),s("div",{staticClass:"chatMessage__content flex-grow flex-shrink",class:t.received?"order-1":"order-2"},[s("p",{staticClass:"chatMessage__sender text-11px max-w-full text-text_lighten dark:text-dark_text mb-1 mx-1 break-all",class:t.received?"text-right":"text-left"},[t._v("\n      "+t._s(t.message.author)+"\n    ")]),s("div",{staticClass:"chatMessage__bubble p-3",class:t.received?"received":"sent"},[t._l(t.message.content,(function(e,a){return s("p",{key:a,staticClass:"text-12px mb-1 leading-normal text-accent font-medium"},[t._v("\n        "+t._s(e)+"\n      ")])})),s("div",{staticClass:"mt-2 text-11px text-text_lighten opacity-50"},[t._v("\n        "+t._s(t.formatTime(t.message.updatedAt))+"\n      ")])],2)])])}),[],!1,null,null,null).exports),f=(s("SYor"),{name:"ChatFooter",emits:["sendMessage"],components:{Icon:o.a},data:function(){return{sendIcon:c.A,closeIcon:c.e,chatMessage:""}},methods:{sendMessage:function(){this.chatMessage.length>0&&(this.$emit("sendMessage",this.chatMessage.trim()),this.chatMessage="",this.$refs.messageInput.focus())}}}),j=(s("EoWQ"),Object(u.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer__loggedIn"},[s("div",{staticClass:"footer__profile flex gap-x-3 items-center"},[s("img",{staticClass:"rounded-full w-8",attrs:{src:t.$store.getters.user.picture}}),s("div",{staticClass:"profile__text flex flex-col gap-y-0"},[s("p",{staticClass:"text-base font-medium"},[t._v(t._s(t.$store.getters.user.name))]),s("div",{staticClass:"text-xs text-gray-400"},[t._v("E-Kailasian")])])]),s("div",{staticClass:"footer__form mt-4 flex items-start gap-x-2"},[s("div",{staticClass:"form__input w-full relative"},[t.chatMessage.length>0?s("button",{staticClass:"form__closeIcon absolute right-0 z-2 mt-1 opacity-50",on:{click:function(e){t.chatMessage=""}}},[s("Icon",{staticClass:"resetIcon w-5",attrs:{icon:t.closeIcon}})],1):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.chatMessage,expression:"chatMessage"}],ref:"messageInput",staticClass:"w-full bg-transparent outline-none text-sm border-b-1 border-text_dark border-opacity-30 pb-2 transition hover:border-opacity-80 focus:border-opacity-80",attrs:{type:"text",name:"message",autocomplete:"off",id:"chatMessage",placeholder:"Say something...",maxlength:"200"},domProps:{value:t.chatMessage},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)},input:function(e){e.target.composing||(t.chatMessage=e.target.value)}}}),s("p",{staticClass:"text-xs text-text_lighten dark:text-dark_text opacity-40 ml-auto text-right mt-1"},[t._v("\n        "+t._s(t.chatMessage.length+"/200")+"\n      ")])]),s("button",{staticClass:"form__sendButton p-2 transition hover:bg-accent rounded-full",class:0==t.chatMessage.length?"disabled":"",on:{click:t.sendMessage}},[s("Icon",{staticClass:"sendButton__icon w-4",attrs:{icon:t.sendIcon}})],1)])])}),[],!1,null,null,null).exports),p={name:"Toast",props:{type:String,className:String,message:String,show:Boolean}},v=Object(u.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Transition",{attrs:{name:"slide-fade"}},[t.show?s("div",{staticClass:"toast p-3 shadow-xl rounded-sm fixed w-auto right-8 top-8 text-base z-20",class:t.className+" "+("error"==t.type?"bg-red-900":"")+" "+("success"==t.type?"bg-theme_bg":"")},[t._v("\n    "+t._s(t.message)+"\n  ")]):t._e()])}),[],!1,null,"082893c1",null).exports,b=s("vDqi"),x={name:"Chat",components:{Icon:o.a,ChatMessage:g,ChatHeader:d,ChatFooter:j,Toast:v,Loader:i.a},data:function(){return{messagesLoaded:!1,messages:[],toastMessage:"",toastType:"",showToast:!1,loginIcon:c.q}},methods:{connectSocket:function(t){var e=this;(a=Object(r.a)("https://nithyananda-tv-chat.herokuapp.com",{auth:{jwt:t}})).on("connect",function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(s){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.messagesLoaded){t.next=3;break}return t.next=3,e.getRecentMessages();case 3:e.scrollChatToBottom();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.on("connect_error",function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(s){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(s),e.toastMessage="Error connecting to live chat. Please try again later",e.toastType="error",t.next=5,e.displayToast();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.on("broadcast",(function(t){e.messages.length>0&&e.messages.at(-1).author_email===t.author_email?(e.messages.at(-1).content.push(t.content),e.messages.at(-1).updatedAt=t.updatedAt):e.messages.push({author:t.author,author_email:t.author_email,picture:t.picture,updatedAt:t.updatedAt,content:[t.content]}),e.scrollChatToBottom()})),a.on("message_send_error",function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(s){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.toastMessage="Error sending message. Please try again later",e.toastType="error",t.next=4,e.displayToast();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},scrollChatToBottom:function(){var t;null===(t=this.$refs.chatMessages)||void 0===t||t.scroll({top:this.$refs.chatMessages.scrollHeight,behavior:"smooth"})},getRecentMessages:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var s,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Date((new Date).getTime()-108e5),a=s.toISOString(),e.next=4,b.get("".concat("https://ntv.dev.nithyanandajnanalaya.org","/api/chat-messages?filters[updatedAt][$gte]=").concat(a,"&populate[author][fields][0]=name&populate[author][fields][1]=email&populate[author][fields][2]=picture"),{headers:{Authorization:"Bearer ".concat(t.$store.getters.jwt)}});case 4:n=e.sent,n.data.data.forEach((function(e,s){if(0!==s)return t.messages.at(-1).author_email===e.attributes.author.data.attributes.email?(t.messages.at(-1).content.push(e.attributes.content),void(t.messages.at(-1).updatedAt=e.attributes.updatedAt)):void t.messages.push({author:e.attributes.author.data.attributes.name,author_email:e.attributes.author.data.attributes.email,picture:e.attributes.picture,updatedAt:e.attributes.updatedAt,content:[e.attributes.content]});t.messages.push({author:e.attributes.author.data.attributes.name,author_email:e.attributes.author.data.attributes.email,picture:e.attributes.author.data.attributes.picture,updatedAt:e.attributes.updatedAt,content:[e.attributes.content]})})),t.messagesLoaded=!0,t.scrollChatToBottom();case 9:case"end":return e.stop()}}),e)})))()},sendMessage:function(t){a.emit("send-message",{content:t})},displayToast:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.showToast=!0,setTimeout((function(){t.showToast=!1}),3e3);case 2:case"end":return e.stop()}}),e)})))()}},beforeUnmount:function(){a&&a.disconnect()},created:function(){this.$store.getters.loggedIn&&this.$store.getters.jwt&&this.connectSocket(this.$store.getters.jwt)}},_=Object(u.a)(x,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"liveChat__container bg-accent_lighten dark:bg-dark_lighten rounded flex flex-col h-full overflow-hidden"},[s("ChatHeader"),t.$store.getters.authChecked&&t.$store.getters.loggedIn?s("div",{ref:"chatMessages",staticClass:"liveChat__messages flex-grow flex-shrink-0 py-3 px-4 w-full overflow-y-scroll <lg:min-h-50vh"},[t.messagesLoaded?t._e():s("div",{staticClass:"h-full w-full flex flex-col justify-center align-center p-8"},[s("Loader",{staticClass:"mb-1"}),s("div",{staticClass:"text-sm text-center"},[t._v("Loading messages")])],1),t._l(t.messages,(function(e){return t.messagesLoaded?s("ChatMessage",{key:e.id,attrs:{received:e.author_email!=t.$store.getters.user.email,message:e}}):t._e()}))],2):s("div",{staticClass:"flex flex-col justify-center items-center flex-grow flex-shrink-0 px-5 py-8"},[s("div",[s("g-link",{staticClass:"googleLogin flex justify-center items-center gap-2 mt-6 py-3 px-5 transition bg-accent hover:bg-accent_darken",attrs:{to:"/login"}},[s("Icon",{attrs:{icon:t.loginIcon,color:"fill-white w-4"}}),s("span",{staticClass:"font-medium text-white"},[t._v("\n          Sign in to Chat\n        ")])],1)],1)]),t.$store.getters.authChecked&&t.$store.getters.loggedIn?s("div",{staticClass:"liveChat__footer flex-shrink-0 border-t-1 border-accent_darken border-opacity-15 px-5 py-3"},[s("ChatFooter",{on:{sendMessage:t.sendMessage}})],1):t._e(),s("Toast",{attrs:{message:t.toastMessage,type:t.toastType,show:t.showToast}})],1)}),[],!1,null,null,null);e.a=_.exports},AlCB:function(t,e,s){var a={"./af":"hray","./af.js":"hray","./ar":"TLJG","./ar-dz":"ThGX","./ar-dz.js":"ThGX","./ar-kw":"mCMU","./ar-kw.js":"mCMU","./ar-ly":"d/tg","./ar-ly.js":"d/tg","./ar-ma":"XuiS","./ar-ma.js":"XuiS","./ar-sa":"VwnT","./ar-sa.js":"VwnT","./ar-tn":"YqvA","./ar-tn.js":"YqvA","./ar.js":"TLJG","./az":"btN9","./az.js":"btN9","./be":"buSO","./be.js":"buSO","./bg":"DsuT","./bg.js":"DsuT","./bm":"QRzF","./bm.js":"QRzF","./bn":"RDLs","./bn-bd":"Tn3t","./bn-bd.js":"Tn3t","./bn.js":"RDLs","./bo":"zUtL","./bo.js":"zUtL","./br":"cy8p","./br.js":"cy8p","./bs":"Zjyx","./bs.js":"Zjyx","./ca":"hCj3","./ca.js":"hCj3","./cs":"Lutb","./cs.js":"Lutb","./cv":"jgAC","./cv.js":"jgAC","./cy":"XMni","./cy.js":"XMni","./da":"+TDs","./da.js":"+TDs","./de":"qbPH","./de-at":"HTvs","./de-at.js":"HTvs","./de-ch":"9zgw","./de-ch.js":"9zgw","./de.js":"qbPH","./dv":"6Nr9","./dv.js":"6Nr9","./el":"VxZA","./el.js":"VxZA","./en-au":"JpMK","./en-au.js":"JpMK","./en-ca":"vMUg","./en-ca.js":"vMUg","./en-gb":"WsKC","./en-gb.js":"WsKC","./en-ie":"V12x","./en-ie.js":"V12x","./en-il":"x1vD","./en-il.js":"x1vD","./en-in":"C6Bk","./en-in.js":"C6Bk","./en-nz":"ISMT","./en-nz.js":"ISMT","./en-sg":"D3AS","./en-sg.js":"D3AS","./eo":"jSpR","./eo.js":"jSpR","./es":"Qh3T","./es-do":"8aos","./es-do.js":"8aos","./es-mx":"0B4w","./es-mx.js":"0B4w","./es-us":"ZsDa","./es-us.js":"ZsDa","./es.js":"Qh3T","./et":"8wfN","./et.js":"8wfN","./eu":"HZ5l","./eu.js":"HZ5l","./fa":"jDYW","./fa.js":"jDYW","./fi":"ClIw","./fi.js":"ClIw","./fil":"CY51","./fil.js":"CY51","./fo":"PfCv","./fo.js":"PfCv","./fr":"A5UK","./fr-ca":"DR1d","./fr-ca.js":"DR1d","./fr-ch":"qTOW","./fr-ch.js":"qTOW","./fr.js":"A5UK","./fy":"UgOA","./fy.js":"UgOA","./ga":"vqaJ","./ga.js":"vqaJ","./gd":"RxQf","./gd.js":"RxQf","./gl":"C+fz","./gl.js":"C+fz","./gom-deva":"mmOZ","./gom-deva.js":"mmOZ","./gom-latn":"1a8k","./gom-latn.js":"1a8k","./gu":"SbcW","./gu.js":"SbcW","./he":"5KRK","./he.js":"5KRK","./hi":"rr6q","./hi.js":"rr6q","./hr":"YqDl","./hr.js":"YqDl","./hu":"tSnw","./hu.js":"tSnw","./hy-am":"SCZk","./hy-am.js":"SCZk","./id":"vhKf","./id.js":"vhKf","./is":"Flay","./is.js":"Flay","./it":"mhIb","./it-ch":"nhrb","./it-ch.js":"nhrb","./it.js":"mhIb","./ja":"93QV","./ja.js":"93QV","./jv":"xZOw","./jv.js":"xZOw","./ka":"65Jj","./ka.js":"65Jj","./kk":"gyfh","./kk.js":"gyfh","./km":"gsWe","./km.js":"gsWe","./kn":"IbIq","./kn.js":"IbIq","./ko":"Jxvl","./ko.js":"Jxvl","./ku":"R18R","./ku.js":"R18R","./ky":"2ScD","./ky.js":"2ScD","./lb":"fMTw","./lb.js":"fMTw","./lo":"qTRV","./lo.js":"qTRV","./lt":"6Yf0","./lt.js":"6Yf0","./lv":"h+jF","./lv.js":"h+jF","./me":"A2NX","./me.js":"A2NX","./mi":"l5W7","./mi.js":"l5W7","./mk":"Y6iZ","./mk.js":"Y6iZ","./ml":"jOv1","./ml.js":"jOv1","./mn":"ozLs","./mn.js":"ozLs","./mr":"d+2t","./mr.js":"d+2t","./ms":"CRR7","./ms-my":"rT3g","./ms-my.js":"rT3g","./ms.js":"CRR7","./mt":"4C9+","./mt.js":"4C9+","./my":"2DxR","./my.js":"2DxR","./nb":"pWlV","./nb.js":"pWlV","./ne":"zncA","./ne.js":"zncA","./nl":"j/8D","./nl-be":"guIg","./nl-be.js":"guIg","./nl.js":"j/8D","./nn":"ZuGb","./nn.js":"ZuGb","./oc-lnc":"a83s","./oc-lnc.js":"a83s","./pa-in":"5yBZ","./pa-in.js":"5yBZ","./pl":"j3dE","./pl.js":"j3dE","./pt":"r77t","./pt-br":"78xH","./pt-br.js":"78xH","./pt.js":"r77t","./ro":"qEMr","./ro.js":"qEMr","./ru":"VG75","./ru.js":"VG75","./sd":"EEu+","./sd.js":"EEu+","./se":"DpDe","./se.js":"DpDe","./si":"0FiJ","./si.js":"0FiJ","./sk":"8XsU","./sk.js":"8XsU","./sl":"rNW4","./sl.js":"rNW4","./sq":"HZoN","./sq.js":"HZoN","./sr":"RUII","./sr-cyrl":"Vg7t","./sr-cyrl.js":"Vg7t","./sr.js":"RUII","./ss":"KWEL","./ss.js":"KWEL","./sv":"m86x","./sv.js":"m86x","./sw":"dG2q","./sw.js":"dG2q","./ta":"JqO8","./ta.js":"JqO8","./te":"i5Id","./te.js":"i5Id","./tet":"MNco","./tet.js":"MNco","./tg":"jxmi","./tg.js":"jxmi","./th":"ZW+a","./th.js":"ZW+a","./tk":"5moA","./tk.js":"5moA","./tl-ph":"3qvj","./tl-ph.js":"3qvj","./tlh":"ZhAa","./tlh.js":"ZhAa","./tr":"01/1","./tr.js":"01/1","./tzl":"SiY1","./tzl.js":"SiY1","./tzm":"6FU+","./tzm-latn":"IsxZ","./tzm-latn.js":"IsxZ","./tzm.js":"6FU+","./ug-cn":"mAKK","./ug-cn.js":"mAKK","./uk":"snIq","./uk.js":"snIq","./ur":"5+B7","./ur.js":"5+B7","./uz":"/O58","./uz-latn":"dJhR","./uz-latn.js":"dJhR","./uz.js":"/O58","./vi":"D5tQ","./vi.js":"D5tQ","./x-pseudo":"pOrv","./x-pseudo.js":"pOrv","./yo":"JeYJ","./yo.js":"JeYJ","./zh-cn":"Wrq9","./zh-cn.js":"Wrq9","./zh-hk":"rBrn","./zh-hk.js":"rBrn","./zh-mo":"gqoT","./zh-mo.js":"gqoT","./zh-tw":"5p2O","./zh-tw.js":"5p2O"};function n(t){var e=r(t);return s(e)}function r(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=r,t.exports=n,n.id="AlCB"},EoWQ:function(t,e,s){"use strict";s("RYuw")},RYuw:function(t,e,s){},SrFS:function(t,e,s){},"VV+c":function(t,e,s){"use strict";var a={},n=(s("0zj9"),s("KHd+")),r=Object(n.a)(a,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"Loader mx-auto"})}),[],!1,null,"75ba2af4",null);e.a=r.exports},gpus:function(t,e,s){"use strict";s("s+lh");var a=s("ZhIB"),n=s("gfuk"),r={name:"VideoCard",props:{video:{type:Object,required:!0}},data:function(){return{formattedViewCount:this.video.attributes?a(this.video.attributes.viewCount).format("0.0a"):null,formattedPublishDate:this.video.attributes?n(this.video.attributes.eventDate).fromNow():null,formattedDuration:this.video.attributes?this.video.attributes.duration>=3600?n.utc(n.duration(this.video.attributes.duration,"seconds").asMilliseconds()).format("HH:mm:ss"):n.utc(n.duration(this.video.attributes.duration,"seconds").asMilliseconds()).format("mm:ss"):null}}},o=(s("0xOb"),s("KHd+")),i=Object(o.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.video.attributes?s("g-link",{staticClass:"videoCard videoCard__link",attrs:{to:"/video/"+t.video.attributes.slug}},[s("div",{staticClass:"videoThumbnail__container bg-accent_lighten dark:bg-dark_lighten aspect-video relative"},[s("img",{ref:"vImg",staticClass:"videoThumbnail lazyload w-full h-full object-cover",attrs:{"data-src":t.video.attributes.thumbnailURL}}),s("div",{staticClass:"videoDuration absolute bottom-0 right-0 mb-2 mr-2 rounded text-gray-100 text-xs p-1 font-medium"},[t._v("\n      "+t._s(t.formattedDuration)+"\n    ")])]),s("div",{staticClass:"videoCard__meta"},[s("h3",{staticClass:"videoCard__title text-sm text-text dark:text-text_dark mt-2 font-medium"},[t._v("\n      "+t._s(t.video.attributes.title)+"\n    ")]),s("div",{staticClass:"flex gap-1 items-end text-xs text-text_lighten dark:text-dark_text opacity-70 mt-2"},[s("p",{staticClass:"videoCard__viewCount"},[t._v(t._s(t.formattedViewCount)+" views")]),t._v("\n      •\n      "),s("p",{staticClass:"videoCard__publishDate"},[t._v("\n        "+t._s(t.formattedPublishDate)+"\n      ")])])])]):s("g-link",{attrs:{to:t.video.moreLink}},[s("div",{staticClass:"moreCard flex justify-center items-center text-lg ml-0.5 bg-accent_lighten dark:bg-dark_lighten font-bold"},[t._v("\n    View All\n  ")])])}),[],!1,null,"0525c6fd",null);e.a=i.exports},sYBl:function(t,e,s){}}]);