(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"0zj9":function(t,e,a){"use strict";a("sYBl")},"4hLg":function(t,e,a){"use strict";var n=a("Mj6V"),s=a.n(n);e.a={beforeRouteLeave:function(t,e,a){t.hash||"undefined"==typeof document||(s.a.start(),a())}}},"AT+L":function(t,e,a){"use strict";a.r(e);var n=a("HaE+"),s=(a("ls82"),a("lO2I")),i=a("za7x"),r=a("VTBJ"),o=a("VV+c"),c=a("e7F3"),l=a("TJPC"),u=a("vDqi");Object(c.c)("email",Object(r.a)(Object(r.a)({},l.b),{},{message:"Not a valid email address"})),Object(c.c)("min",{validate:function(t,e){return t.length>=e.length},params:["length"],message:"{_field_} must be at least {length} characters"}),Object(c.c)("required",Object(r.a)(Object(r.a)({},l.c),{},{message:"{_field_} is required"}));var d={name:"LoginForm",components:{Icon:i.a,ValidationProvider:c.b,ValidationObserver:c.a,Loader:o.a},data:function(){return{emailIcon:s.b,pwdIcon:s.n,submitIcon:s.z,email:"",name:"",password:"",strapiError:null,submitLoader:!1}},methods:{onSubmit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.submitLoader=!0,u.post("".concat("https://ntv.dev.nithyanandajnanalaya.org","/api/auth/local"),{identifier:t.email,password:t.password}).then((function(e){t.submitLoader=!1,t.$emit("loginSuccess",{user:e.data.user,jwt:e.data.jwt})})).catch((function(e){t.strapiError=e.response.data.error.message,t.submitLoader=!1}));case 2:case"end":return e.stop()}}),e)})))()}}},m=(a("Uyth"),a("KHd+")),p=Object(m.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.handleSubmit;return[a("form",{staticClass:"registrationForm flex flex-col gap-2 mt-6",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),n(t.onSubmit)}}},[a("ValidationProvider",{attrs:{name:"Email Address",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"inputItem flex gap-3 p-3 bg-white dark:bg-dark_info"},[a("Icon",{staticClass:"transition hover:fill-white",attrs:{icon:t.emailIcon,color:"fill-gray-400 w-4"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"bg-transparent outline-none border-none text-sm w-full font-medium",attrs:{type:"email",name:"email",id:"email",placeholder:"Email Address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})],1),a("div",{staticClass:"flex flex-col justify-end min-h-4 mt-2"},[a("span",{staticClass:"text-xs text-red-400 transition",class:e.touched&&e.failed||e.pristine&&e.failed?"opacity-100 visible":"opacity-0 invisible"},[t._v(t._s(e.errors[0]))])])]}}],null,!0)}),a("ValidationProvider",{attrs:{name:"Password",rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"inputItem flex gap-3 p-3 bg-white dark:bg-dark_info"},[a("Icon",{staticClass:"transition hover:fill-white",attrs:{icon:t.pwdIcon,color:"fill-gray-400 w-4"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"bg-transparent outline-none border-none text-sm w-full font-medium",attrs:{type:"password",name:"password",id:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})],1),a("div",{staticClass:"flex flex-col justify-end min-h-4 mt-2"},[a("span",{staticClass:"text-xs text-red-400 transition",class:e.touched&&e.failed||e.pristine&&e.failed?"opacity-100 visible":"opacity-0 invisible"},[t._v(t._s(e.errors[0]))])])]}}],null,!0)}),a("p",{staticClass:"text-base text-red-400 transition text-center w-full",class:t.strapiError?"opacity-100 visible":"opacity-0 invisible"},[t._v("\n        "+t._s(t.strapiError)+"\n      ")]),t.submitLoader?a("Loader"):a("button",{staticClass:"submitForm flex justify-center items-center gap-2 p-3 transition bg-accent hover:bg-accent_darken text-accent_lighten font-medium",attrs:{type:"submit"}},[a("Icon",{staticClass:"w-4",attrs:{icon:t.submitIcon,color:"fill-white"}}),t._v("\n        Log in\n      ")],1)],1)]}}])})],1)}),[],!1,null,"1dc3baa0",null).exports,f=a("MyAk"),g=a("4hLg"),h={name:"Login",components:{Icon:i.a,LoginForm:p},mixins:[g.a,f.a],data:function(){return{googleIcon:s.j,loggedIn:!1,strapiUrl:"https://ntv.dev.nithyanandajnanalaya.org"}},methods:{handleLogin:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.$cookies.set("NTV_Session",t.jwt),e.$store.commit("setLoggedIn",{jwt:t.jwt,user:t.user}),e.$store.commit("setAuthChecked",!0),e.loggedIn=!0,e.$router.push("/account");case 5:case"end":return a.stop()}}),a)})))()}}},v=Object(m.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("div",{staticClass:"flex justify-center items-center"},[t.$store.getters.authChecked&&!t.$store.getters.loggedIn?a("div",{staticClass:"px-10 py-14 my-16 <md:min-w-screen md:w-512px bg-accent_lighten dark:bg-dark_lighten"},[a("div",{staticClass:"text-3xl font-bold mb-1 text-text dark:text-dark_text_lighten"},[t._v("\n        Log in\n      ")]),a("p",{staticClass:"text-base text-text_lighten dark:text-dark_text"},[t._v("\n        Don't have an account?\n        "),a("g-link",{staticClass:"font-medium text-accent dark:text-accent hover:dark:text-accent_lighten",attrs:{to:"/register"}},[t._v("Sign up")])],1),a("a",{staticClass:"googleLogin flex justify-center items-center gap-2 mt-6 p-3 transition bg-accent hover:bg-accent_darken",attrs:{href:t.strapiUrl+"/api/connect/google"}},[a("Icon",{staticClass:"w-5",attrs:{icon:t.googleIcon,color:"fill-white"}}),a("span",{staticClass:"font-medium text-white"},[t._v("\n          Sign in with Google\n        ")])],1),a("p",{staticClass:"separator my-3 text-text dark:text-dark_text opacity-50 text-center overflow-hidden"},[t._v("\n        or\n      ")]),a("LoginForm",{on:{loginSuccess:t.handleLogin}})],1):t._e()])])}),[],!1,null,null,null);e.default=v.exports},MyAk:function(t,e,a){"use strict";a("vDqi");e.a={created:function(){var t=this;this.unwatch=this.$store.watch((function(t,e){return e.authChecked}),(function(e,a){e&&t.$store.getters.loggedIn&&t.$router.push("/account")}))},beforeDestroy:function(){this.unwatch()}}},"Tx/o":function(t,e,a){},Uyth:function(t,e,a){"use strict";a("Tx/o")},"VV+c":function(t,e,a){"use strict";var n={},s=(a("0zj9"),a("KHd+")),i=Object(s.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"Loader mx-auto"})}),[],!1,null,"75ba2af4",null);e.a=i.exports},sYBl:function(t,e,a){}}]);