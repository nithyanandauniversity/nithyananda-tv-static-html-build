import{c as y,_ as v}from"./mdi.8a543158.js";import{j as g,k,x as b,v as l,l as w,z as L,u as o,a as t,e as n,w as C,F as N,r as B,f as S,o as e,h as T,t as V,A as D}from"./entry.ef5d6334.js";import{_ as H}from"./VideoListItem.50146de9.js";import{_ as I}from"./Loader.18622640.js";import{u as $}from"./composables.49ef9c00.js";import{_ as j}from"./_plugin-vue_export-helper.c27b6911.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";const R={key:0,class:"mx-6 md:mx-10 mb-6 md:mb-10 mt-6 md:mt-8"},z={key:0},A={key:0,class:"text-xl font-bold my-4 text-text dark:text-dark_text border-b-1 border-accent_darken border-opacity-20 pb-2"},F={key:1,class:"text-base flex justify-center items-center w-full h-full"},U={key:1,class:"flex justify-center items-center w-full h-screen"},E=g({__name:"history",setup(G){$({title:"Watch History - Nithyananda TV"});const _=k(),p=b(),a=l([]),d=l(!0),f=w();return L(async()=>{try{const u=(await $fetch(`${p.public.strapiURL}/api/users-permissions/watch-history`,{headers:{Authorization:`Bearer ${_.getJwt}`}})).map(s=>{let r=new Date(s.timestamp).toUTCString();return s.date=new Date(r).toDateString(),s});a.value=u,d.value=!1}catch{f.push("/account")}}),(m,u)=>{const s=v,r=S,h=H,x=I;return o(_).getLoggedIn&&!o(d)?(e(),t("div",R,[n(r,{class:"goBack flex items-center text-base gap-0 mb-8",to:"/account"},{default:C(()=>[n(s,{icon:o(y),class:"w-7"},null,8,["icon"]),T(" Go Back ")]),_:1}),o(a).length>0?(e(),t("div",z,[(e(!0),t(N,null,B(o(a),(c,i)=>(e(),t("div",{key:i,class:"mb-8"},[i===0||c.date!=o(a)[i-1].date?(e(),t("div",A,V(c.date),1)):D("",!0),n(h,{video:c.video},null,8,["video"])]))),128))])):(e(),t("div",F," No videos watched "))])):(e(),t("div",U,[n(x)]))}}});const X=j(E,[["__scopeId","data-v-ea38171d"]]);export{X as default};
