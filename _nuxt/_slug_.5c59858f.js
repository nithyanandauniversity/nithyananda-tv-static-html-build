import{_ as $}from"./VideoCard.e8483509.js";import{_ as N}from"./CardSkeleton.14f9505b.js";import{j as S,y as I,x as B,C as E,v as n,z as L,a as _,b as i,t as h,u as l,F as x,r as y,A as M,o as r,c as R,E as T,G as z,e as A}from"./entry.1682faa2.js";import{u as D}from"./composables.14d93683.js";import{a as F}from"./useApi.70d18877.js";import{_ as H}from"./_plugin-vue_export-helper.c27b6911.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";import"./index.a8fdb12b.js";const P={class:"playlist__header <sm:px-6 px-10 pt-10 pb-8"},j={class:"text-4xl font-medium mb-3"},q={class:"text-base"},G={class:"<sm:px-6 px-10 pb-10 pt-4 flex flex-wrap gap-x-2 gap-y-5 mb-16 pb-16"},O={key:0,class:"min-h-400px"},U=S({__name:"[slug]",async setup(J){let c,b;const w=I(),k=B(),e=([c,b]=E(()=>F(w.params.slug.toString())),c=await c,b(),c),t=n(e.attributes.videos?e.attributes.videos.data:null);D({title:`${e.attributes.title} - Nithyananda TV`,meta:[{name:"description",content:e.attributes.description.substring(0,160)},{name:"og:title",content:`${e.attributes.title} - Nithyananda TV`},{name:"og:description",content:e.attributes.description.substring(0,160)}]});const u=n(!1),p=n(2),m=n(4),v=n(null);L(()=>{new IntersectionObserver(C).observe(v.value?v.value:new HTMLElement)});const C=(o,d)=>{o.forEach(async s=>{s.isIntersecting&&p.value<=m.value&&(u.value=!0,await V(p.value,20)),p.value>m.value&&d.disconnect()})},V=async(o,d)=>{const s=await $fetch(`${k.public.strapiURL}/api/videos?filters[playlists][slug][$eq]=${e.attributes.slug}&pagination[page]=${o}&pagination[pageSize]=${d}`);if(m.value=s.meta.pagination.pageCount,s.data.length>0&&t.value){let g=new Set(t.value.map(f=>f.id)),a=[...t.value,...s.data.filter(f=>!g.has(f.id))];t.value.splice(0,t.value.length),t.value.push(...a)}u.value=!1,p.value++};return(o,d)=>{const s=$,g=N;return r(),_("div",null,[i("div",P,[i("h1",j,h(l(e).attributes.title),1),i("p",q,h(l(e).attributes.description),1)]),i("div",G,[(r(!0),_(x,null,y(l(t),a=>(r(),R(s,{key:a.id,video:a},null,8,["video"]))),128)),(r(),_(x,null,y(5,a=>T(A(g,{key:a}),[[z,l(u)]])),64))]),l(u)?(r(),_("div",O)):M("",!0),i("div",{class:"invisible",ref_key:"loadMore",ref:v},".",512)])}}});const ae=H(U,[["__scopeId","data-v-04dc5d30"]]);export{ae as default};
