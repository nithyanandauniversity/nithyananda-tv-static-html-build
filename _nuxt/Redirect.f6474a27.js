import{_ as h}from"./Loader.620ed525.js";import{j as k,v as u,x,y,l as v,m as w,k as b,z as C,a as s,u as a,e as l,b as _,h as r,t as j,w as N,A as L,f as R,o}from"./entry.1682faa2.js";import"./_plugin-vue_export-helper.c27b6911.js";const V={class:"flex justify-center items-center w-full h-full"},A={key:0,class:"flex justify-center items-center p-12 min-w-50vw min-h-50vh"},S={key:1,class:"px-10 py-14 my-16 min-w-40vw bg-accent_lighten dark:bg-dark_lighten"},B={key:0},$={class:"text-base text-red-400 opacity-70 text-center"},q=_("br",null,null,-1),I=k({__name:"Redirect",setup(E){const n=u(!0),t=u(""),d=x(),c=y(),p=v(),m=w("NTV_Session"),i=b();return C(async()=>{if(c.query.access_token)try{const e=await $fetch(`${d.public.strapiURL}/api/auth/google/callback?access_token=${c.query.access_token}`);m.value=e.data.jwt,i.setLoggedIn({jwt:e.data.jwt,user:e.data.user}),i.setAuthChecked(!0),p.push("/account")}catch(e){e.response.data.error?t.value=e.response.data.error.message:t.value="An unknown error occured.",n.value=!1}else t.value="An error occured in signing you in to Google.",n.value=!1}),(e,T)=>{const g=h,f=R;return o(),s("div",V,[a(n)?(o(),s("div",A,[l(g)])):(o(),s("div",S,[a(t).length>0?(o(),s("div",B,[_("p",$,[r(j(a(t))+" ",1),q,r("Please try "),l(f,{class:"font-medium text-accent dark:text-accent hover:dark:text-accent_lighten",to:"/login"},{default:N(()=>[r("logging in again")]),_:1})])])):L("",!0)]))])}}});export{I as default};
