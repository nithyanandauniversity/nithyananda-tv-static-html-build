import{_ as S}from"./VideoCard.b43168f9.js";import{_ as B}from"./CardSkeleton.c416f748.js";import{i as I,N as M,y as $,z as E,q as o,j as L,s as T,o as i,a as _,b as l,t as h,u as r,F as y,r as x,x as q,M as A,c as D,A as F,B as H,e as P}from"./entry.6a23ce5c.js";import{b as R}from"./useApi.e537e589.js";import"./nuxt-link.01267993.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";import"./index.e9cbcaec.js";import"./_plugin-vue_export-helper.c27b6911.js";const j={class:"playlist__header px-6 sm:px-10 pt-10 pb-8"},z={class:"text-4xl font-medium mb-3"},O={class:"text-base"},G={class:"playlist__content px-6 sm:px-10 pb-10 pt-4 flex flex-wrap gap-x-2 gap-y-5 mb-16 pb-16"},J={key:0,class:"min-h-400px"},ae=I({__name:"[slug]",async setup(K){let c,f;const w=M(),k=A(),C=$(),e=([c,f]=E(()=>R(w.params.slug.toString())),c=await c,f(),c),t=o(e.attributes.videos?e.attributes.videos.data:null);L({title:`${e.attributes.title} - Nithyananda TV`,meta:[{name:"description",content:e.attributes.description.substring(0,160)},{name:"og:title",content:`${e.attributes.title} - Nithyananda TV`},{name:"og:description",content:e.attributes.description.substring(0,160)}]});const u=o(!1),p=o(2),m=o(4),v=o(null);T(()=>{new IntersectionObserver(V).observe(v.value?v.value:new HTMLElement)});const V=(n,d)=>{n.forEach(async s=>{s.isIntersecting&&p.value<=m.value&&(u.value=!0,await N(p.value,20)),p.value>m.value&&d.disconnect()})},N=async(n,d)=>{const s=await C(`${k.public.strapi.url}/api/videos`,{params:{filters:{playlists:{slug:{$eq:e.attributes.slug}}},populate:["coverImage"],pagination:{page:n,pageSize:d}}});if(m.value=s.meta.pagination.pageCount,s.data.length>0&&t.value){let g=new Set(t.value.map(b=>b.id)),a=[...t.value,...s.data.filter(b=>!g.has(b.id))];t.value.splice(0,t.value.length),t.value.push(...a)}u.value=!1,p.value++};return(n,d)=>{const s=S,g=B;return i(),_("div",null,[l("div",j,[l("h1",z,h(r(e).attributes.title),1),l("p",O,h(r(e).attributes.description),1)]),l("div",G,[(i(!0),_(y,null,x(r(t),a=>(i(),D(s,{key:a.id,video:a},null,8,["video"]))),128)),(i(),_(y,null,x(5,a=>F(P(g,{key:a}),[[H,r(u)]])),64))]),r(u)?(i(),_("div",J)):q("",!0),l("div",{class:"invisible",ref_key:"loadMore",ref:v},".",512)])}}});export{ae as default};
