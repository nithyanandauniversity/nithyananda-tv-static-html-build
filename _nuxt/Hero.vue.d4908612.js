import{t as _t,u as ft,_ as yt}from"./mdi.25c8c8e3.js";import{_ as vt}from"./nuxt-link.1b5305ab.js";import{i as wt,k as kt,N as St,y as $t,q as Tt,o as C,a as I,u as x,e as ot,f as j,x as it,b as z,t as W,c as Ct,w as Lt,M as Et}from"./entry.645b31f3.js";import"./lazysizes.869e4f93.js";import{n as It}from"./numbro.min.107d2f30.js";import{u as Mt}from"./livestream.5221b7bd.js";import{f as At}from"./index.e9cbcaec.js";import{p as Dt}from"./VideoCard.310c0bc5.js";const Ht=""+new URL("featured-live-video.acd3fcf8.jpg",import.meta.url).href;let p,mt,o,n,h,S,N,$,L,D,nt,G,v,ht,_,M,q,X,R,K,T,at;const U=[];let F,st,P,lt,Y,Q,a,l,B,A={},J,f;const d="appendChild",u="createElement",y="removeChild",Vt=t=>(mt||zt(t),v&&(clearTimeout(ht),pt()),f=t,G=t.ytSrc||t.vimeoSrc,st=t.animationStart,P=t.animationEnd,lt=t.onChangeImage,p=t.el,F=!1,X=p.getAttribute("data-caption"),t.gallery?Ot(t.gallery,t.position):G||t.iframeSrc?(n=$,Bt()):t.imgSrc?(F=!0,D=t.imgSrc,!~U.indexOf(D)&&O(!0),n=h,n.src=D):t.audio?(O(!0),n=N,n.src=t.audio,ct("audio file")):t.vidSrc?(O(!0),t.dimensions&&m(S,`width:${t.dimensions[0]}px`),Nt(t.vidSrc),ct("video")):(n=h,n.src=p.tagName==="IMG"?p.src:window.getComputedStyle(p).backgroundImage.replace(/^url|[(|)|'|"]/g,"")),o[d](n),document.body[d](o),{close:dt,opts:f,updateDimensions:ut,display:n,next:()=>k(1),prev:()=>k(-1)});function zt(t){let e,i;function s(r){const b=document[u]("button");return b.className=r,b.innerHTML='<svg viewBox="0 0 48 48"><path d="M28 24L47 5a3 3 0 1 0-4-4L24 20 5 1a3 3 0 1 0-4 4l19 19L1 43a3 3 0 1 0 4 4l19-19 19 19a3 3 0 0 0 4 0v-4L28 24z"/></svg>',b}function c(r,b){const E=document[u]("button");return E.className="bp-lr",E.innerHTML='<svg viewBox="0 0 129 129" height="70" fill="#fff"><path d="M88.6 121.3c.8.8 1.8 1.2 2.9 1.2s2.1-.4 2.9-1.2a4.1 4.1 0 0 0 0-5.8l-51-51 51-51a4.1 4.1 0 0 0-5.8-5.8l-54 53.9a4.1 4.1 0 0 0 0 5.8l54 53.9z"/></svg>',m(E,b),E.onclick=tt=>{tt.stopPropagation(),k(r)},E}const g=document[u]("STYLE"),w=t&&t.overlayColor?t.overlayColor:"rgba(0,0,0,.7)";g.innerHTML=`#bp_caption,#bp_container{bottom:0;left:0;right:0;position:fixed;opacity:0}#bp_container>*,#bp_loader{position:absolute;right:0;z-index:10}#bp_container,#bp_caption,#bp_container svg{pointer-events:none}#bp_container{top:0;z-index:9999;background:${w};opacity:0;transition:opacity .35s}#bp_loader{top:0;left:0;bottom:0;display:flex;align-items:center;cursor:wait;background:0;z-index:9}#bp_loader svg{width:50%;max-width:300px;max-height:50%;margin:auto;animation:bpturn 1s infinite linear}#bp_aud,#bp_container img,#bp_sv,#bp_vid{user-select:none;max-height:96%;max-width:96%;top:0;bottom:0;left:0;margin:auto;box-shadow:0 0 3em rgba(0,0,0,.4);z-index:-1}#bp_sv{background:#111}#bp_sv svg{width:66px}#bp_caption{font-size:.9em;padding:1.3em;background:rgba(15,15,15,.94);color:#fff;text-align:center;transition:opacity .3s}#bp_aud{width:650px;top:calc(50% - 20px);bottom:auto;box-shadow:none}#bp_count{left:0;right:auto;padding:14px;color:rgba(255,255,255,.7);font-size:22px;cursor:default}#bp_container button{position:absolute;border:0;outline:0;background:0;cursor:pointer;transition:all .1s}#bp_container>.bp-x{padding:0;height:41px;width:41px;border-radius:100%;top:8px;right:14px;opacity:.8;line-height:1}#bp_container>.bp-x:focus,#bp_container>.bp-x:hover{background:rgba(255,255,255,.2)}.bp-x svg,.bp-xc svg{height:21px;width:20px;fill:#fff;vertical-align:top;}.bp-xc svg{width:16px}#bp_container .bp-xc{left:2%;bottom:100%;padding:9px 20px 7px;background:#d04444;border-radius:2px 2px 0 0;opacity:.85}#bp_container .bp-xc:focus,#bp_container .bp-xc:hover{opacity:1}.bp-lr{top:50%;top:calc(50% - 130px);padding:99px 0;width:6%;background:0;border:0;opacity:.4;transition:opacity .1s}.bp-lr:focus,.bp-lr:hover{opacity:.8}@keyframes bpf{50%{transform:translatex(15px)}100%{transform:none}}@keyframes bpl{50%{transform:translatex(-15px)}100%{transform:none}}@keyframes bpfl{0%{opacity:0;transform:translatex(70px)}100%{opacity:1;transform:none}}@keyframes bpfr{0%{opacity:0;transform:translatex(-70px)}100%{opacity:1;transform:none}}@keyframes bpfol{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(-70px)}}@keyframes bpfor{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(70px)}}@keyframes bpturn{0%{transform:none}100%{transform:rotate(360deg)}}@media (max-width:600px){.bp-lr{font-size:15vw}}`,document.head[d](g),o=document[u]("DIV"),o.id="bp_container",o.onclick=dt,nt=s("bp-x"),o[d](nt),"ontouchend"in window&&window.visualViewport&&(J=!0,o.ontouchstart=({touches:r,changedTouches:b})=>{i=r.length>1,e=b[0].pageX},o.ontouchend=({changedTouches:r})=>{if(T&&!i&&window.visualViewport.scale<=1){let b=r[0].pageX-e;b<-30&&k(1),b>30&&k(-1)}}),h=document[u]("IMG"),S=document[u]("VIDEO"),S.id="bp_vid",S.setAttribute("playsinline",!0),S.controls=!0,S.loop=!0,N=document[u]("audio"),N.id="bp_aud",N.controls=!0,N.loop=!0,B=document[u]("span"),B.id="bp_count",M=document[u]("DIV"),M.id="bp_caption",R=s("bp-xc"),R.onclick=Z.bind(null,!1),M[d](R),q=document[u]("SPAN"),M[d](q),o[d](M),Y=c(1,"transform:scalex(-1)"),Q=c(-1,"left:0;right:auto"),_=document[u]("DIV"),_.id="bp_loader",_.innerHTML='<svg viewbox="0 0 32 32" fill="#fff" opacity=".8"><path d="M16 0a16 16 0 0 0 0 32 16 16 0 0 0 0-32m0 4a12 12 0 0 1 0 24 12 12 0 0 1 0-24" fill="#000" opacity=".5"/><path d="M16 0a16 16 0 0 1 16 16h-4A12 12 0 0 0 16 4z"/></svg>',$=document[u]("DIV"),$.id="bp_sv",L=document[u]("IFRAME"),L.setAttribute("allowfullscreen",!0),L.allow="autoplay; fullscreen",L.onload=()=>$[y](_),m(L,"border:0;position:absolute;height:100%;width:100%;left:0;top:0"),$[d](L),h.onload=H,h.onerror=H.bind(null,"image"),window.addEventListener("resize",()=>{T||v&&O(!0),n===$&&ut()}),document.addEventListener("keyup",({keyCode:r})=>{r===27&&K&&dt(),T&&(r===39&&k(1),r===37&&k(-1),r===38&&k(10),r===40&&k(-10))}),document.addEventListener("keydown",r=>{T&&~[37,38,39,40].indexOf(r.keyCode)&&r.preventDefault()}),document.addEventListener("focus",r=>{K&&!o.contains(r.target)&&(r.stopPropagation(),nt.focus())},!0),mt=!0}function gt(){const{top:t,left:e,width:i,height:s}=p.getBoundingClientRect(),c=e-(o.clientWidth-i)/2,g=t-(o.clientHeight-s)/2,w=p.clientWidth/n.clientWidth,r=p.clientHeight/n.clientHeight;return`transform:translate3D(${c}px, ${g}px, 0) scale3D(${w}, ${r}, 0)`}function Nt(t){Array.isArray(t)?(n=S.cloneNode(),t.forEach(e=>{const i=document[u]("SOURCE");i.src=e,i.type=`video/${e.match(/.(\w+)$/)[1]}`,n[d](i)})):(n=S,n.src=t)}function Ot(t,e){let i=f.galleryAttribute||"data-bp";if(Array.isArray(t))a=e||0,l=t,X=t[a].caption;else{l=[].slice.call(typeof t=="string"?document.querySelectorAll(`${t} [${i}]`):t);const s=l.indexOf(p);a=e===0||e?e:s!==-1?s:0,l=l.map(c=>({el:c,src:c.getAttribute(i),caption:c.getAttribute("data-caption")}))}F=!0,D=l[a].src,!~U.indexOf(D)&&O(!0),l.length>1?(o[d](B),B.innerHTML=`${a+1}/${l.length}`,J||(o[d](Y),o[d](Q))):l=!1,n=h,n.src=D}function k(t){const e=l.length-1;if(v)return;if(t>0&&a===e||t<0&&!a){if(!f.loop){m(h,""),setTimeout(m,9,h,`animation:${t>0?"bpl":"bpf"} .3s;transition:transform .35s`);return}a=t>0?-1:e+1}if(a=Math.max(0,Math.min(a+t,e)),[a-1,a,a+1].forEach(s=>{if(s=Math.max(0,Math.min(s,e)),A[s])return;const c=l[s].src,g=document[u]("IMG");g.addEventListener("load",bt.bind(null,c)),g.src=c,A[s]=g}),A[a].complete)return rt(t);v=!0,m(_,"opacity:.4;"),o[d](_),A[a].onload=()=>{T&&rt(t)},A[a].onerror=()=>{l[a]={error:"Error loading image"},T&&rt(t)}}function rt(t){v&&(o[y](_),v=!1);const e=l[a];if(e.error)alert(e.error);else{const i=o.querySelector("img:last-of-type");h=n=A[a],m(h,`animation:${t>0?"bpfl":"bpfr"} .35s;transition:transform .35s`),m(i,`animation:${t>0?"bpfol":"bpfor"} .35s both`),o[d](h),e.el&&(p=e.el)}B.innerHTML=`${a+1}/${l.length}`,Z(l[a].caption),lt&&lt([h,l[a]])}function Bt(){let t;const e="https://",i="autoplay=1";f.ytSrc?t=`${e}www.youtube${f.ytNoCookie?"-nocookie":""}.com/embed/${G}?html5=1&rel=0&playsinline=1&${i}`:f.vimeoSrc?t=`${e}player.vimeo.com/video/${G}?${i}`:f.iframeSrc&&(t=f.iframeSrc),m(_,""),$[d](_),L.src=t,ut(),setTimeout(H,9)}function ut(){let t,e;const i=window.innerHeight*.95,s=window.innerWidth*.95,c=i/s,[g,w]=f.dimensions||[1920,1080],r=w/g;r>c?(t=Math.min(w,i),e=t/r):(e=Math.min(g,s),t=e*r),$.style.cssText+=`width:${e}px;height:${t}px;`}function ct(t){~[1,4].indexOf(n.readyState)?(H(),setTimeout(()=>{n.play()},99)):n.error?H(t):ht=setTimeout(ct,35,t)}function O(t){f.noLoader||(t&&m(_,`top:${p.offsetTop}px;left:${p.offsetLeft}px;height:${p.clientHeight}px;width:${p.clientWidth}px`),p.parentElement[t?d:y](_),v=t)}function Z(t){t&&(q.innerHTML=t),m(M,`opacity:${t?"1;pointer-events:auto":"0"}`)}function bt(t){!~U.indexOf(t)&&U.push(t)}function H(t){if(v&&O(),st&&st(),typeof t=="string")return pt(),f.onError?f.onError():alert(`Error: The requested ${t} could not be loaded.`);F&&bt(D),n.style.cssText+=gt(),m(o,"opacity:1;pointer-events:auto"),P&&(P=setTimeout(P,410)),K=!0,T=!!l,setTimeout(()=>{n.style.cssText+="transition:transform .35s;transform:none",X&&setTimeout(Z,250,X)},60)}function dt(t){const e=t?t.target:o,i=[M,R,S,N,q,Q,Y,_];e.blur(),!(at||~i.indexOf(e))&&(n.style.cssText+=gt(),m(o,"pointer-events:auto"),setTimeout(pt,350),clearTimeout(P),K=!1,at=!0)}function pt(){if((n===$?L:n).removeAttribute("src"),document.body[y](o),o[y](n),m(o,""),m(n,""),Z(!1),T){const e=o.querySelectorAll("img");for(let i=0;i<e.length;i++)o[y](e[i]);v&&o[y](_),o[y](B),T=l=!1,A={},J||o[y](Y),J||o[y](Q),h.onload=H,h.onerror=H.bind(null,"image")}f.onClose&&f.onClose(),at=v=!1}function m({style:t},e){t.cssText=e}const Pt={key:0,class:"liveChip absolute top-0 right-0 z-20 bg-red-600 p-1 mt-3 mr-3 sm:mt-6 sm:mr-6 rounded flex jusitfy-center items-center gap-x-1 uppercase text-xs text-white sm:text-sm tracking-wider"},jt={class:"hero__cover overflow-hidden"},Wt={class:"w-full h-full aspect-video"},Rt={key:0,alt:"",src:Ht,class:"hero__cover__img w-full h-full object-cover object-center"},Gt=["src"],qt={class:"hero__text px-10 pt-0 pb-6 flex flex-col justify-center"},Xt={class:"text-2xl font-bold mb-3 text-secondary dark:text-dark_text_lighten"},Kt={key:0,class:"flex gap-2 items-end text-sm opacity-60 text-text_lighten dark:text-dark_text"},Ut={class:"videoCard__publishDate"},Ft={class:"videoCard__viewCount"},Jt={key:1,class:"text-xs text-text_lighten dark:text-dark_text overflow-ellipsis overflow-hidden mt-2"},ae=wt({__name:"Hero",props:{video:{type:Object,required:!0}},setup(t){const e=t,i=kt(),s=Mt(),c=St(),g=Et(),w=$t(),r=Tt(null),b=e.video.attributes.viewCount?It(Number(e.video.attributes.viewCount)).format({average:!0,mantissa:1}):null,E=e.video.attributes.eventDate?At(Dt(e.video.attributes.eventDate,"yyyy-MM-dd",new Date))+" ago":null,tt=async()=>{if(i.getLoggedIn)try{const V=await w("/users-permissions/watch-history",{method:"POST",headers:{Authorization:`Bearer ${i.getJwt}`},params:{id:e.video.id}})}catch(V){console.log(V)}try{const V=await w(`/videos/${e.video.id}/watch`,{method:"POST"})}catch(V){console.log(V)}Vt({el:r.value,ytSrc:e.video.attributes.youtubeID,ytNoCookie:!1,dimensions:[1920,1080],noLoader:!0})};return(V,Yt)=>{const et=yt,xt=vt;return C(),I("div",{ref_key:"hero",ref:r,class:"hero h-screen-50vh relative flex flex-col md:flex-row bg-white dark:bg-dark justify-between"},[x(s).getLiveStatus?(C(),I("div",Pt,[ot(et,{color:"fill-white",class:"liveChip__icon w-2 sm:w-3",icon:x(_t)},null,8,["icon"]),j("Live ")])):it("",!0),z("div",jt,[z("div",Wt,[x(s).getLiveStatus?(C(),I("img",Rt)):(C(),I("img",{key:1,alt:"",src:`${x(g).public.strapi.url}${e.video.attributes.coverImage.data.attributes.url}`,class:"hero__cover__img w-full h-full lazyload object-cover object-center"},null,8,Gt))])]),z("div",qt,[z("h1",Xt,W(e.video.attributes.title),1),!x(c).path.startsWith("/video")&&!x(s).getLiveStatus?(C(),I("div",Kt,[z("p",Ut,W(x(E)),1),j(" • "),z("p",Ft,W(x(b))+" views",1)])):it("",!0),x(c).path=="/"?(C(),I("p",Jt,W(e.video.attributes.description.substring(0,100)+"..."),1)):it("",!0),x(c).path=="/home"?(C(),Ct(xt,{key:2,to:x(s).getLiveStatus?"/":`/video/${e.video.attributes.slug}`,"aria-label":"Go to video",class:"hero__morebutton mt-4 bg-accent px-5 py-2 w-max flex justify-center items-center gap-x-1 text-sm transition-colors hover:bg-accent_darken text-white hover:text-white font-medium"},{default:Lt(()=>[ot(et,{color:"fill-white",class:"w-5",icon:x(ft)},null,8,["icon"]),j("Watch Now")]),_:1},8,["to"])):(C(),I("button",{key:3,"aria-label":"Play video",onClick:tt,class:"hero__playbutton mt-4 bg-accent px-5 py-2 w-max flex justify-center items-center gap-x-1 text-sm transition-colors hover:bg-accent_darken text-white hover:text-white font-medium"},[ot(et,{color:"fill-white",class:"w-5",icon:x(ft)},null,8,["icon"]),j(" Play Video ")]))])],512)}}});export{ae as _};
