import{j as y,x as L,v as u,o as m,a as _,e as o,w as S,b as s,u as e,S as b,q as C,t as A,h,c as F,k as I,m as N,l as E,A as T,f as R}from"./entry.ef5d6334.js";import{j as B,k as U,l as q,_ as V,n as P}from"./mdi.8a543158.js";import{_ as Z}from"./Loader.18622640.js";import{F as v,E as k,a as D}from"./vee-validate.esm.fdb8d0ff.js";import{_ as G}from"./_plugin-vue_export-helper.c27b6911.js";import{u as z}from"./composables.49ef9c00.js";const H={class:"inputItem flex gap-3 p-3 bg-white dark:bg-dark_info"},K={class:"flex flex-col justify-end min-h-4 mt-2"},M={class:"inputItem flex gap-3 p-3 bg-white dark:bg-dark_info"},O={class:"flex flex-col justify-end min-h-4 mt-2"},J={key:0,type:"submit",class:"submitForm flex justify-center items-center gap-2 p-3 transition bg-accent hover:bg-accent_darken text-accent_lighten font-medium"},Q=y({__name:"LoginForm",emits:["loginSuccess"],setup(j,{emit:p}){const a=L(),i=u(""),r=u(""),d=u(""),l=u(!1),c=t=>t?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)?!0:"Not a valid email address":"This field is required",w=t=>t?!0:"This field is required",f=async()=>{l.value=!0;try{const t=await $fetch(`${a.public.strapiURL}/api/auth/local`,{method:"POST",body:{identifier:i.value,password:r.value}});l.value=!1,p("loginSuccess",{user:t.user,jwt:t.jwt})}catch(t){d.value=t.response.data.error.message,l.value=!1}};return(t,n)=>{const g=V,$=Z;return m(),_("div",null,[o(e(D),{autocomplete:"off",onSubmit:f,class:"registrationForm flex flex-col gap-2 mt-6"},{default:S(()=>[s("div",H,[o(g,{icon:e(B),color:"fill-gray-400 w-4",class:"transition hover:fill-white"},null,8,["icon"]),o(e(v),{type:"email",name:"email",rules:c,id:"email",placeholder:"Email Address",class:"bg-transparent outline-none border-none text-sm w-full font-medium",modelValue:e(i),"onUpdate:modelValue":n[0]||(n[0]=x=>b(i)?i.value=x:null)},null,8,["modelValue"])]),s("div",K,[o(e(k),{name:"email"})]),s("div",M,[o(g,{icon:e(U),color:"fill-gray-400 w-4",class:"transition hover:fill-white"},null,8,["icon"]),o(e(v),{type:"password",name:"password",id:"password",placeholder:"Password",class:"bg-transparent outline-none border-none text-sm w-full font-medium",modelValue:e(r),"onUpdate:modelValue":n[1]||(n[1]=x=>b(r)?r.value=x:null),rules:w},null,8,["modelValue"])]),s("div",O,[o(e(k),{name:"password"})]),s("p",{class:C(["text-base text-red-400 transition text-center w-full",e(d)?"opacity-100 visible":"opacity-0 invisible"])},A(e(d)),3),e(l)?(m(),F($,{key:1})):(m(),_("button",J,[o(g,{icon:e(q),color:"fill-white",class:"w-4"},null,8,["icon"]),h(" Log in ")]))]),_:1})])}}});const W=G(Q,[["__scopeId","data-v-08bb4d58"]]),X={class:"flex justify-center items-center"},Y={key:0,class:"px-10 py-14 my-16 <md:min-w-screen md:w-512px bg-accent_lighten dark:bg-dark_lighten"},ee=s("div",{class:"text-3xl font-bold mb-1 text-text dark:text-dark_text_lighten"}," Log in ",-1),te={class:"text-base text-text_lighten dark:text-dark_text"},oe=["href"],se=s("span",{class:"font-medium text-white"}," Sign in with Google ",-1),ne=s("p",{class:"separator my-3 text-text dark:text-dark_text opacity-50 text-center overflow-hidden"}," or ",-1),ue=y({__name:"login",setup(j){z({title:"Login - Nithyananda TV"});const p=L(),a=I(),i=u(!1),r=N("NTV_Session"),d=E(),l=c=>{r.value=c.jwt,a.setLoggedIn({jwt:c.jwt,user:c.user}),a.setAuthChecked(!0),i.value=!0,d.push("/account")};return(c,w)=>{const f=R,t=V,n=W;return m(),_("div",X,[e(a).getAuthChecked&&!e(a).getLoggedIn?(m(),_("div",Y,[ee,s("p",te,[h(" Don't have an account? "),o(f,{class:"font-medium text-accent dark:text-accent hover:dark:text-accent_lighten",to:"/register"},{default:S(()=>[h("Sign up")]),_:1})]),s("a",{href:`${e(p).public.strapiURL}/api/connect/google`,class:"googleLogin flex justify-center items-center gap-2 mt-6 p-3 transition bg-accent hover:bg-accent_darken"},[o(t,{icon:e(P),color:"fill-white",class:"w-5"},null,8,["icon"]),se],8,oe),ne,o(n,{onLoginSuccess:l})])):T("",!0)])}}});export{ue as default};
