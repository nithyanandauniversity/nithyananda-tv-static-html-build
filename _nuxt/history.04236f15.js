import{_ as y,c as x}from"./mdi.25c8c8e3.js";import{_ as g}from"./nuxt-link.1b5305ab.js";import{_ as b}from"./VideoListItem.cb47de25.js";import{_ as k}from"./Loader.fbcdf348.js";import{i as w,j as I,k as L,y as C,q as u,l as N,s as S,u as s,o as e,a as o,e as n,w as B,f as T,F as V,r as D,t as H,x as j}from"./entry.645b31f3.js";import{_ as F}from"./_plugin-vue_export-helper.c27b6911.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";const R={key:0,class:"mx-6 md:mx-10 mb-6 md:mb-10 mt-6 md:mt-8"},$={key:0},q={key:0,class:"text-xl font-bold my-4 text-text dark:text-dark_text border-b-1 border-accent_darken border-opacity-20 pb-2"},z={key:1,class:"text-base flex justify-center items-center w-full h-full"},A={key:1,class:"flex justify-center items-center w-full h-screen"},E=w({__name:"history",setup(G){I({title:"Watch History - Nithyananda TV"});const _=L(),p=C(),a=u([]),d=u(!0),f=N();return S(async()=>{try{const l=(await p("/users-permissions/watch-history",{headers:{Authorization:`Bearer ${_.getJwt}`}})).map(t=>{let c=new Date(t.timestamp).toUTCString();return t.date=new Date(c).toDateString(),t.video.coverImage={data:{attributes:{url:t.video.coverImage.url,formats:t.video.coverImage.formats?t.video.coverImage.formats:null}}},t});a.value=l,d.value=!1}catch{f.push("/account")}}),(m,l)=>{const t=y,c=g,h=b,v=k;return s(_).getLoggedIn&&!s(d)?(e(),o("div",R,[n(c,{class:"goBack flex items-center text-base gap-0 mb-8",to:"/account","aria-label":"Return to account page"},{default:B(()=>[n(t,{icon:s(x),class:"w-7"},null,8,["icon"]),T(" Go Back ")]),_:1}),s(a).length>0?(e(),o("div",$,[(e(!0),o(V,null,D(s(a),(r,i)=>(e(),o("div",{key:i,class:"mb-8"},[i===0||r.date!=s(a)[i-1].date?(e(),o("div",q,H(r.date),1)):j("",!0),n(h,{video:{id:r.video.id,attributes:r.video}},null,8,["video"])]))),128))])):(e(),o("div",z," No videos watched "))])):(e(),o("div",A,[n(v)]))}}});const X=F(E,[["__scopeId","data-v-425a8643"]]);export{X as default};
