import{_ as L}from"./VideoCard.b43168f9.js";import{_ as z}from"./CardSkeleton.c416f748.js";import{i as R,N as V,y as P,q as u,O as T,P as j,s as q,o as l,a as p,u as o,x,b as y,F as b,r as C,c as g,A as I,B as $,e as S,w as N,T as D,C as E,j as O,l as Q,Q as F,G as M}from"./entry.6a23ce5c.js";import{_ as G}from"./VideoSlider.249082c1.js";import{_ as A}from"./VideoSliderSkeleton.c73d2427.js";import{u as H}from"./search.7d901b7e.js";import"./nuxt-link.01267993.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";import"./index.e9cbcaec.js";import"./_plugin-vue_export-helper.c27b6911.js";const J={key:0,class:"flex p-18 text-lg justify-center items-center"},K={class:"px-10 pb-10 pt-4 flex flex-wrap gap-x-2 gap-y-5 mb-16 pb-16"},U={key:1,class:"min-h-400px"},W=R({__name:"SearchVideos",setup(B){const i=V(),_=P(),v=u(null),t=u(1),d=u(0),s=u(!0),e=u([]),w=T(()=>i.query.q);j(w,async(a,r)=>{t.value=1,a&&a.length>2&&(e.value.splice(0,e.value.length),s.value=!0,await m(t.value,20))});const m=async(a,r)=>{const n=await _("/videos",{params:{filters:{title:{$containsi:i.query.q}},populate:["coverImage"],pagination:{page:a,pageSize:r}}});if(n.data.length>0){let h=new Set(e.value.map(f=>f.id)),c=[...e.value,...n.data.filter(f=>!h.has(f.id))];e.value.splice(0,e.value.length),e.value.push(...c)}d.value=n.meta.pagination.pageCount,t.value++,s.value=!1},k=(a,r)=>{a.forEach(async n=>{n.isIntersecting&&t<=d&&(s.value=!0,await m(t.value,20)),t.value>d.value&&r.disconnect()})};return q(async()=>{s.value=!0,await m(t.value,20);const a=new IntersectionObserver(k,{rootMargin:"100px",threshold:0});v.value&&a.observe(v.value)}),(a,r)=>{const n=L,h=z;return l(),p("div",null,[!o(s)&&o(e).length==0?(l(),p("div",J," No search results ")):x("",!0),y("div",K,[(l(!0),p(b,null,C(o(e),c=>(l(),g(n,{key:`search-video-${c.id}`,video:c},null,8,["video"]))),128)),(l(),p(b,null,C(4,c=>I(S(h,{key:c}),[[$,o(s)]])),64))]),o(s)?(l(),p("div",U)):x("",!0),y("div",{class:"invisible",ref_key:"loadMore",ref:v},null,512)])}}}),X={key:0,class:"flex p-18 text-lg justify-center items-center"},Y={key:3,class:"min-h-400px"},Z=R({__name:"SearchPlaylists",setup(B){const i=V(),_=P(),v=u(null),t=u(1),d=u(0),s=u(!0),e=u([]),w=T(()=>i.query.q);j(w,async(a,r)=>{t.value=1,a&&a.length>2&&(e.value.splice(0,e.value.length),s.value=!0,await m(t.value,10))});const m=async(a,r)=>{const n=await _("/playlists",{params:{filters:{title:{$containsi:i.query.q}},fields:["title","description","slug"],populate:{videos:{fields:["title","slug","description","youtubeID","eventDate","viewCount","duration"],populate:["coverImage"]}},pagination:{page:a,pageSize:r}}});if(n.data.length>0){let h=new Set(e.value.map(f=>f.id)),c=[...e.value,...n.data.filter(f=>!h.has(f.id))];e.value.splice(0,e.value.length),e.value.push(...c)}d.value=n.meta.pagination.pageCount,t.value++,s.value=!1},k=(a,r)=>{a.forEach(async n=>{n.isIntersecting&&t<=d&&(s.value=!0,await m(t.value,10)),t.value>d.value&&r.disconnect()})};return q(async()=>{s.value=!0,await m(t.value,10);const a=new IntersectionObserver(k,{rootMargin:"100px",threshold:0});v.value&&a.observe(v.value)}),(a,r)=>{const n=G,h=A;return l(),p("div",null,[!o(s)&&o(e).length==0?(l(),p("div",X," No search results ")):(l(),g(D,{key:1,name:"fade"},{default:N(()=>[(l(!0),p(b,null,C(o(e),c=>(l(),g(n,{key:`search-playlist-${c.id}`,playlist:c,class:"videoSlider"},null,8,["playlist"]))),128))]),_:1})),o(s)?(l(),g(E,{key:2,name:"fade"},{default:N(()=>[S(h)]),_:1})):x("",!0),o(s)?(l(),p("div",Y)):x("",!0),y("div",{class:"invisible",ref_key:"loadMore",ref:v},".",512)])}}}),ee={class:"search__tabs mt-18 mb-8 text-lg text-center flex justify-center items-center"},de=R({__name:"search",setup(B){O({title:"Search Results - Nithyananda TV"});const i=u("videos"),_=H();return V(),Q(),q(()=>{_.searchBarStatus||_.displaySearchBar()}),F(()=>{_.hideSearchBar()}),(v,t)=>{const d=W,s=Z;return l(),p(b,null,[y("div",ee,[y("div",{class:M(["tab__button py-3 px-10 flex-1",o(i)=="videos"?"active":""]),onClick:t[0]||(t[0]=e=>i.value="videos")}," Videos ",2),y("div",{class:M(["tab__button py-3 px-10 flex-1",o(i)=="playlists"?"active":""]),onClick:t[1]||(t[1]=e=>i.value="playlists")}," Playlists ",2)]),I(S(d,{class:"tab__videoResults"},null,512),[[$,o(i)=="videos"]]),I(S(s,{class:"tab__playlistResults"},null,512),[[$,o(i)=="playlists"]])],64)}}});export{de as default};
