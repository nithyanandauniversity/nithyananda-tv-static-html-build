import{_ as j}from"./VideoCard.e8483509.js";import{_ as z}from"./CardSkeleton.14f9505b.js";import{j as V,y as q,x as M,v as c,P,N as T,z as I,o,a as p,u as n,A as x,b as y,F as b,r as k,c as g,E as R,G as C,e as S,w as B,T as D,D as E,l as U,a3 as F,q as L}from"./entry.1682faa2.js";import{_ as G}from"./VideoSlider.c78b9f1f.js";import{_ as O}from"./VideoSliderSkeleton.76ac09b1.js";import{u as Q}from"./composables.14d93683.js";import{u as A}from"./search.fde225d1.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";import"./index.a8fdb12b.js";import"./_plugin-vue_export-helper.c27b6911.js";const H={key:0,class:"flex p-18 text-lg justify-center items-center"},J={class:"px-10 pb-10 pt-4 flex flex-wrap gap-x-2 gap-y-5 mb-16 pb-16"},K={key:1,class:"min-h-400px"},W=V({__name:"SearchVideos",setup(N){const i=q(),_=M(),v=c(null),t=c(1),d=c(0),a=c(!0),e=c([]),$=P(()=>i.query.q);T($,async(s,r)=>{t.value=1,s&&s.length>2&&(e.value.splice(0,e.value.length),a.value=!0,await f(t.value,20))});const f=async(s,r)=>{const l=await $fetch(`${_.public.strapiURL}/api/videos?filters[title][$containsi]=${i.query.q}&pagination[page]=${s}&pagination[pageSize]=${r}`);if(l.data.length>0){let h=new Set(e.value.map(m=>m.id)),u=[...e.value,...l.data.filter(m=>!h.has(m.id))];e.value.splice(0,e.value.length),e.value.push(...u)}d.value=l.meta.pagination.pageCount,t.value++,a.value=!1},w=(s,r)=>{s.forEach(async l=>{l.isIntersecting&&t<=d&&(a.value=!0,await f(t.value,20)),t.value>d.value&&r.disconnect()})};return I(async()=>{a.value=!0,await f(t.value,20);const s=new IntersectionObserver(w,{rootMargin:"100px",threshold:0});v.value&&s.observe(v.value)}),(s,r)=>{const l=j,h=z;return o(),p("div",null,[!n(a)&&n(e).length==0?(o(),p("div",H," No search results ")):x("",!0),y("div",J,[(o(!0),p(b,null,k(n(e),u=>(o(),g(l,{key:`search-video-${u.id}`,video:u},null,8,["video"]))),128)),(o(),p(b,null,k(4,u=>R(S(h,{key:u}),[[C,n(a)]])),64))]),n(a)?(o(),p("div",K)):x("",!0),y("div",{class:"invisible",ref_key:"loadMore",ref:v},null,512)])}}}),X={key:0,class:"flex p-18 text-lg justify-center items-center"},Y={key:3,class:"min-h-400px"},Z=V({__name:"SearchPlaylists",setup(N){const i=q(),_=M(),v=c(null),t=c(1),d=c(0),a=c(!0),e=c([]),$=P(()=>i.query.q);T($,async(s,r)=>{t.value=1,s&&s.length>2&&(e.value.splice(0,e.value.length),a.value=!0,await f(t.value,10))});const f=async(s,r)=>{const l=await $fetch(`${_.public.strapiURL}/api/playlists?filters[title][$containsi]=${i.query.q}&pagination[page]=${s}&pagination[pageSize]=${r}&fields[0]=title&fields[1]=slug&fields[2]=description&populate[videos][fields][0]=title&populate[videos][fields][1]=slug&populate[videos][fields][2]=description&populate[videos][fields][3]=thumbnailURL&populate[videos][fields][3]=youtubeID&populate[videos][fields][4]=eventDate&populate[videos][fields][5]=viewCount&populate[videos][fields][6]=duration`);if(l.data.length>0){let h=new Set(e.value.map(m=>m.id)),u=[...e.value,...l.data.filter(m=>!h.has(m.id))];e.value.splice(0,e.value.length),e.value.push(...u)}d.value=l.meta.pagination.pageCount,t.value++,a.value=!1},w=(s,r)=>{s.forEach(async l=>{l.isIntersecting&&t<=d&&(a.value=!0,await f(t.value,10)),t.value>d.value&&r.disconnect()})};return I(async()=>{a.value=!0,await f(t.value,10);const s=new IntersectionObserver(w,{rootMargin:"100px",threshold:0});v.value&&s.observe(v.value)}),(s,r)=>{const l=G,h=O;return o(),p("div",null,[!n(a)&&n(e).length==0?(o(),p("div",X," No search results ")):(o(),g(D,{key:1,name:"fade"},{default:B(()=>[(o(!0),p(b,null,k(n(e),u=>(o(),g(l,{key:`search-playlist-${u.id}`,playlist:u,class:"videoSlider"},null,8,["playlist"]))),128))]),_:1})),n(a)?(o(),g(E,{key:2,name:"fade"},{default:B(()=>[S(h)]),_:1})):x("",!0),n(a)?(o(),p("div",Y)):x("",!0),y("div",{class:"invisible",ref_key:"loadMore",ref:v},".",512)])}}}),ee={class:"search__tabs mt-18 mb-8 text-lg text-center flex justify-center items-center"},de=V({__name:"search",setup(N){Q({title:"Search Results - Nithyananda TV"});const i=c("videos"),_=A();return q(),U(),I(()=>{_.searchBarStatus||_.displaySearchBar()}),F(()=>{_.hideSearchBar()}),(v,t)=>{const d=W,a=Z;return o(),p(b,null,[y("div",ee,[y("div",{class:L(["tab__button py-3 px-10 flex-1",n(i)=="videos"?"active":""]),onClick:t[0]||(t[0]=e=>i.value="videos")}," Videos ",2),y("div",{class:L(["tab__button py-3 px-10 flex-1",n(i)=="playlists"?"active":""]),onClick:t[1]||(t[1]=e=>i.value="playlists")}," Playlists ",2)]),R(S(d,{class:"tab__videoResults"},null,512),[[C,n(i)=="videos"]]),R(S(a,{class:"tab__playlistResults"},null,512),[[C,n(i)=="playlists"]])],64)}}});export{de as default};
