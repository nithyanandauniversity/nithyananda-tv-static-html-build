import{_ as E}from"./VideoSlider.f5e5526c.js";import{_ as L}from"./VideoSliderSkeleton.86d68ad1.js";import{u as B}from"./composables.49ef9c00.js";import{j as I,x as N,v as i,B as P,C as T,z as $,a as u,e as _,w as x,T as A,D,u as g,A as F,b as p,F as h,o,r as b,c as M,E as R,G as z}from"./entry.ef5d6334.js";import"./VideoCard.7ebabb4c.js";import"./lazysizes.869e4f93.js";import"./numbro.min.107d2f30.js";import"./index.a8fdb12b.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./CardSkeleton.0773bbf0.js";const U=p("h1",{class:"text-3xl font-bold text-secondary dark:text-dark_text_lighten <sm:px-6 px-10 mt-10"}," Explore Playlists ",-1),G={class:"my-4"},H={key:0,class:"min-h-400px"},te=I({__name:"explore",async setup(j){let l,y;B({title:"Explore Videos and Playlists - Nithyananda TV"});const w=N(),e=i([]),{find:k}=P(),C=([l,y]=T(()=>k("playlists",{fields:["title","slug","description"],populate:{videos:{fields:["title","slug","description","thumbnailURL","viewCount","eventDate","duration","likeCount"]}},sort:["isFeatured:desc","id:asc"],pagination:{page:1,pageSize:10}})),l=await l,y(),l);e.value.push(...C.data);const n=i(!1),r=i(2),c=i(4),m=i(null);$(()=>{new IntersectionObserver(S).observe(m.value?m.value:new HTMLElement)});const S=(a,d)=>{a.forEach(async t=>{t.isIntersecting&&r.value<=c.value&&(n.value=!0,await V(r.value,10)),r.value>c.value&&d.disconnect()})},V=async(a,d)=>{const t=await $fetch(`${w.public.strapiURL}/api/playlists?sort[0]=isFeatured%3Adesc&sort[1]=id%3Aasc&pagination[page]=${a}&pagination[pageSize]=${d}&fields[0]=title&fields[1]=slug&fields[2]=description&populate[videos][fields][0]=title&populate[videos][fields][0]=slug&populate[videos][fields][0]=description&populate[videos][fields][0]=thumbnailURL&populate[videos][fields][0]=youtubeID`);if(c.value=t.meta.pagination.pageCount,t.data.length>0){let v=new Set(e.value.map(f=>f.id)),s=[...e.value,...t.data.filter(f=>!v.has(f.id))];e.value.splice(0,e.value.length),e.value.push(...s)}r.value++,n.value=!1};return(a,d)=>{const t=E,v=L;return o(),u(h,null,[U,_(A,{name:"fade"},{default:x(()=>[(o(!0),u(h,null,b(g(e),s=>(o(),M(t,{key:`playlist-${s.id}`,playlist:s,class:"videoSlider"},null,8,["playlist"]))),128))]),_:1}),_(D,{name:"fade"},{default:x(()=>[R(p("div",G,[(o(),u(h,null,b(3,s=>p("div",{key:s,class:"mt-10"},[_(v)])),64))],512),[[z,g(n)]])]),_:1}),g(n)?(o(),u("div",H)):F("",!0),p("div",{class:"invisible",ref_key:"loadMore",ref:m},".",512)],64)}}});export{te as default};
