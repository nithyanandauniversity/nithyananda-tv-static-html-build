import{u as x,_ as A}from"./Hero.vue.155aac7d.js";import{_ as k,p as j,q,r as O,s as z,t as J,u as E,v as H,w as M,b as W}from"./mdi.8a543158.js";import{o,a as l,b as i,e as _,w as C,A as g,D as L,F as K,r as G,c as u,j as Q,y as X,x as Y,J as Z,k as tt,C as S,v as b,u as e,t as f,h as et,p as it,i as ot}from"./entry.ef5d6334.js";import{_ as T}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as st}from"./VideoSliderSkeleton.86d68ad1.js";import{_ as at}from"./VideoSlider.f5e5526c.js";import{u as rt}from"./composables.49ef9c00.js";import{b as nt}from"./useApi.a3fdb845.js";import{n as $}from"./numbro.min.107d2f30.js";import{f as lt,p as dt}from"./index.a8fdb12b.js";import"./lazysizes.869e4f93.js";import"./CardSkeleton.0773bbf0.js";import"./VideoCard.7ebabb4c.js";const ct={name:"SocialShare",components:{Icon:k},props:{title:{type:String,required:!0},url:{type:String,required:!0}},data(){return{copyIcon:j,showTooltip:!1,socialPlatforms:[{icon:q,platform:"facebook",shareUrl:`https://www.facebook.com/sharer.php?u=${this.url}
`},{icon:O,platform:"twitter",shareUrl:`https://twitter.com/intent/tweet?url=${this.url}&text=${this.title}&via=SriNithyananda&hashtags=Kailasa,Nithyananda`},{icon:z,platform:"reddit",shareUrl:`https://reddit.com/submit?url=${this.url}&title=${this.title}`},{icon:J,platform:"linkedin",shareUrl:`https://www.linkedin.com/sharing/share-offsite/?url=${this.url}`},{icon:E,platform:"weibo",shareUrl:`http://service.weibo.com/share/share.php?url=${this.url}&appkey=&title=${this.title}&pic=&ralateUid=`},{icon:H,platform:"email",shareUrl:`mailto:?subject=${this.title}&amp;body=Watch this video ${this.url}`}]}},methods:{copyClipboard(){navigator.clipboard.writeText(this.url),this.showTooltip=!0,setTimeout(()=>{this.showTooltip=!1},2e3)}}},pt={class:"shareButtons flex gap-x-3"},ut={key:0,class:"copyTooltip bg-accent_lighten text-text dark:text-dark_text dark:bg-dark_lighten p-2 rounded text-xs absolute bottom-0 mb-9 whitespace-nowrap"},_t=["data-network","data-title","data-url","href"];function mt(d,s,n,v,a,m){const r=k;return o(),l("div",pt,[i("button",{class:"relative socialShare",onClick:s[0]||(s[0]=(...t)=>m.copyClipboard&&m.copyClipboard(...t))},[_(L,{name:"fade"},{default:C(()=>[a.showTooltip?(o(),l("div",ut," Link copied to clipboard! ")):g("",!0)]),_:1}),_(r,{icon:a.copyIcon,color:"fill-gray-400 w-5",class:"transition hover:fill-white"},null,8,["icon"])]),(o(!0),l(K,null,G(a.socialPlatforms,(t,c)=>(o(),l("a",{class:"socialShare","data-network":t.platform,"data-title":n.title,"data-url":n.url,href:t.shareUrl,target:"_blank"},[(o(),u(r,{key:`social-share-${c}`,icon:t.icon,class:"w-6 transition"},null,8,["icon"]))],8,_t))),256))])}const ht=T(ct,[["render",mt],["__scopeId","data-v-7d00d80c"]]),ft=d=>(it("data-v-d819a2a1"),d=d(),ot(),d),vt={class:"video__description flex p-10 gap-8 <sm:flex-col"},bt={class:"share__bar"},gt=["src"],kt=ft(()=>i("div",{class:"text-lg font-medium mb-2"},"Share this video:",-1)),wt={class:"video__text flex-grow-1"},yt={class:"video__meta flex justify-between items-center pb-2 border-b-1 border-accent_darken border-opacity-20"},xt={class:"flex gap-2 items-end text-sm opacity-80 text-text_lighten dark:text-dark_text"},St={class:"videoCard__viewCount"},$t={key:0,class:"video__like"},Ct={class:"text-sm opacity-80"},Lt={class:"text-sm whitespace-pre-line"},Tt={key:1,class:"video__watchmore"},Ut=Q({__name:"[slug]",async setup(d){let s,n;const v=X(),a=Y(),m=Z(),r=tt(),t=([s,n]=S(()=>nt(v.params.slug.toString())),s=await s,n(),s);rt({title:`${t.attributes.title} - Nithyananda TV`,meta:[{name:"description",content:t.attributes.description.substring(0,160)},{name:"og:title",content:`${t.attributes.title} - Nithyananda TV`},{name:"og:description",content:t.attributes.description.substring(0,160)},{name:"og:image",content:t.attributes.thumbnailURL}]});const c=b(!0),U=`https://${a.public.websiteDomain}${v.path}`,V=$(Number(t.attributes.viewCount)).format({average:!0,mantissa:1}),I=t.attributes.likeCount?$(Number(t.attributes.likeCount)).format({average:!0,mantissa:1}):"",D=lt(dt(t.attributes.eventDate.toString(),"yyyy-MM-dd",new Date))+" ago",p=b(!1),h=b(null);if(t.attributes.playlists&&t.attributes.playlists.data.length>0){const w=([s,n]=S(()=>$fetch(`${a.public.strapiURL}/api/playlists/${t.attributes.playlists.data[0].id}?fields[0]=title&fields[1]=slug&fields[2]=description&populate[videos][fields][0]=title&populate[videos][fields][0]=slug&populate[videos][fields][0]=description&populate[videos][fields][0]=thumbnailURL&populate[videos][fields][0]=youtubeID&populate[videos][fields][0]=eventDate&populate[videos][fields][0]=duration&populate[videos][fields][0]=viewCount&populate[videos][fields][0]=likeCount`)),s=await s,n(),s);h.value=w.data,c.value=!1}else h.value=m.getFeaturedPlaylists[0],c.value=!1;const N=async()=>{p.value?(await x(`${a.public.strapiURL}/api/users-permissions/unlike-video?id=${t.id}`,{method:"POST",headers:{Authorization:`Bearer ${r.getJwt}`}},"$uOT4gqnvzP"),p.value=!1,r.removeFromLikedVideos(t.id.toString())):(await x(`${a.public.strapiURL}/api/users-permissions/like-video?id=${t.id}`,{method:"POST",headers:{Authorization:`Bearer ${r.getJwt}`}},"$wj83ySUDfv"),p.value=!0,r.addToLikedVideos(t.id.toString()))};return(w,Vt)=>{const R=A,P=ht,y=k,B=st,F=at;return o(),l("div",null,[_(R,{video:e(t)},null,8,["video"]),i("div",vt,[i("div",bt,[i("img",{class:"<sm:hidden video__thumbnail transition-opacity aspect-video flex-grow-0 flex-shrink-1 sm:max-w-30vw h-max mb-4",src:e(t).attributes.thumbnailURL},null,8,gt),kt,_(P,{title:e(t).attributes.title,url:U},null,8,["title"])]),i("div",wt,[i("div",yt,[i("div",xt,[i("p",{class:"videoCard__publishDate"},f(D)),et(" â€¢ "),i("p",St,f(e(V))+" views",1)]),e(r).getLoggedIn?(o(),l("div",$t,[i("button",{onClick:N,class:"like__button flex gap-2 items-center text-text_lighten dark:text-dark_text transition hover:text-accent_darken hover:dark:text-accent hover:opacity-100"},[e(p)?(o(),u(y,{key:0,color:"fill-accent_darken",class:"w-4",icon:e(M)},null,8,["icon"])):(o(),u(y,{key:1,class:"w-4",icon:e(W)},null,8,["icon"])),i("span",Ct,f(e(p)?`${e(I)} Likes`:"Like this video"),1)])])):g("",!0)]),i("p",Lt,f(e(t).attributes.description),1)])]),e(c)?(o(),u(L,{key:0,name:"fade"},{default:C(()=>[_(B)]),_:1})):(o(),l("div",Tt,[e(h)?(o(),u(F,{key:0,playlist:e(h)},null,8,["playlist"])):g("",!0)]))])}}});const Et=T(Ut,[["__scopeId","data-v-d819a2a1"]]);export{Et as default};
